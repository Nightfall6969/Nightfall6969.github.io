<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ICT Computer Servicing ¬∑ full quiz (20 questions)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            background-color: #f5f7fa;
            color: #333;
            max-width: 100%;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 80px;
        }
        .container {
            width: 100%;
            margin: 0 auto;
            padding: 15px;
            background-color: white;
            min-height: 100vh;
        }
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            flex-wrap: wrap;
        }
        .quiz-progress {
            font-size: 14px;
            color: #2c3e50;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        .subject-badge {
            background: linear-gradient(135deg, #3498db, #9b59b6);
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: bold;
        }
        .streak-counter {
            background-color: #f39c12;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
        }
        .quiz-timer {
            background-color: #f8f9fa;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            color: #e74c3c;
        }
        .student-info {
            background-color: #e8f4fc;
            padding: 12px;
            border-radius: 12px;
            margin: 10px 0 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        .student-input {
            flex: 2;
            min-width: 180px;
            padding: 10px 15px;
            border: 2px solid #b0d4f0;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: 0.2s;
        }
        .student-input:focus {
            border-color: #3498db;
        }
        .start-btn, .save-score-btn {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
        }
        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* --- Video Section Styling --- */
        .video-container {
            margin: 15px 0;
            border-radius: 12px;
            overflow: hidden;
            background: #000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        video {
            width: 100%;
            display: block;
        }
        /* ---------------------------- */

        .question-container {
            margin-bottom: 20px;
        }
        .question-text {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            line-height: 1.4;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #34495e;
        }
        .options-container {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }
        .option {
            padding: 12px 15px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
        }
        .option:hover { border-color: #3498db; background-color: #f8f9fa; }
        .option.selected { border-color: #3498db; background-color: #e8f4fc; }
        .option.correct { border-color: #2ecc71; background-color: #e8f8f0; }
        .option.incorrect { border-color: #e74c3c; background-color: #fef0f0; }
        .option-letter {
            width: 28px; height: 28px; border-radius: 50%;
            background-color: #ecf0f1; display: flex; align-items: center; justify-content: center;
            margin-right: 12px; font-weight: bold; color: #7f8c8d; flex-shrink: 0;
        }
        .option.selected .option-letter { background-color: #3498db; color: white; }
        .option.correct .option-letter { background-color: #2ecc71; color: white; }
        .option.incorrect .option-letter { background-color: #e74c3c; color: white; }
        .option-text { flex: 1; font-size: 16px; }

        .feedback {
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            display: none;
            font-size: 14px;
        }
        .correct-feedback { background-color: #e8f8f0; border-left: 5px solid #2ecc71; }
        .incorrect-feedback { background-color: #fef0f0; border-left: 5px solid #e74c3c; }
        .feedback-title { font-weight: bold; margin-bottom: 8px; font-size: 16px; }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin: 20px 0;
        }
        .nav-button {
            padding: 14px 20px;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            font-size: 15px;
            flex: 1;
            transition: 0.2s;
        }
        .nav-button:disabled { opacity: 0.4; cursor: not-allowed; }
        .prev-btn { background: #ecf0f1; color: #2c3e50; }
        .submit-btn { background: linear-gradient(135deg, #2ecc71, #27ae60); color: white; }
        .next-btn { background: linear-gradient(135deg, #3498db, #2980b9); color: white; }

        .scoreboard {
            background: #f0f7ff;
            padding: 15px;
            border-radius: 20px;
            margin: 20px 0;
            border: 2px dashed #3498db;
        }
        .leaderboard {
            background: #fff7e6;
            padding: 15px;
            border-radius: 20px;
            margin-top: 20px;
        }
        .leaderboard h3 { color: #e67e22; margin-bottom: 8px; }
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #ffe6b3;
        }

        .nav-bar {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            background-color: white;
            border-top: 1px solid #eee;
            position: fixed;
            bottom: 0; left: 0; right: 0;
            z-index: 1000;
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; flex: 1; }
        .nav-icon { width: 24px; height: 24px; background-color: #bdc3c7; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 12px; margin-bottom: 4px; }
        .nav-item.active .nav-icon { background-color: #3498db; }
        .nav-label { font-size: 11px; color: #7f8c8d; }
        .nav-item.active .nav-label { color: #3498db; font-weight: bold; }

        .hidden { display: none; }
    </style>
</head>
<body>
<div class="container" id="app">
    <div class="quiz-header">
        <div class="quiz-progress">
            <span id="qCounter">Question 1 / 20</span>
            <span class="subject-badge">ICT Servicing</span>
            <span class="streak-counter" id="streakDisplay">üî• 0 streak</span>
        </div>
        <div class="quiz-timer" id="timerDisplay">‚è±Ô∏è 3:00</div>
    </div>

    <div class="student-info" id="studentPanel">
        <input type="text" id="studentNameInput" class="student-input" placeholder="Enter your name (e.g., Write Name & Section here)" value="Write Name Here">
        <button id="startQuizBtn" class="start-btn">‚ñ∂ Start / Reset quiz</button>
        <button id="saveScoreBtn" class="save-score-btn" disabled>üíæ Save my score</button>
    </div>

    <div class="video-container" id="introVideoContainer">
        <video id="introVideo" controls>
            <source src="Video Lesson.mp4" type="video/mp4">
        </video>
    </div>

    <div id="quizArea" style="display: none;">
        <div class="question-container">
            <div class="question-text" id="questionText">Loading...</div>
            <div class="options-container" id="optionsContainer"></div>
            <div class="feedback correct-feedback" id="correctFeedback"></div>
            <div class="feedback incorrect-feedback" id="incorrectFeedback"></div>
        </div>

        <div class="navigation-buttons">
            <button class="nav-button prev-btn" id="prevBtn" disabled>‚Üê Previous</button>
            <button class="nav-button submit-btn" id="submitBtn" disabled>Submit Answer</button>
            <button class="nav-button next-btn" id="nextBtn" disabled>Next ‚Üí</button>
        </div>
    </div>

    <div id="scoreArea" style="margin-top: 25px;">
        <div class="scoreboard" id="liveScoreBoard">
            <strong>üìä current score:</strong> <span id="scoreDisplay">0</span> / 20
        </div>
        <div class="leaderboard" id="leaderboard">
            <h3>üèÜ recorded scores</h3>
            <div id="leaderboardList">(no scores yet)</div>
            <button id="clearScoresBtn" style="background:#e74c3c; color:white; border:none; padding:6px 12px; border-radius:20px; margin-top:8px; font-size:12px; cursor:pointer;">clear history</button>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item"><div class="nav-icon">üè†</div><div class="nav-label">Home</div></div>
        <div class="nav-item"><div class="nav-icon">üìö</div><div class="nav-label">Lessons</div></div>
        <div class="nav-item active"><div class="nav-icon">üíª</div><div class="nav-label">ICT Quiz</div></div>
        <div class="nav-item"><div class="nav-icon">üë§</div><div class="nav-label">Profile</div></div>
    </div>
</div>

<script>
    (function() {
        const questions = [
            { question: "Q1. Which of the following is an input device?", options: ["Keyboard", "Monitor", "Printer", "Speaker"], correct: "A", explanation: "Keyboard is an input device.", detailed: "‚úÖ Keyboard: Each key press generates a unique scan code." },
            { question: "Q2. Which of the following is an output device?", options: ["Mouse", "Monitor", "Keyboard", "Scanner"], correct: "B", explanation: "Monitor is an output device.", detailed: "Monitor (screen) ‚Äì primary visual output." },
            { question: "Q3. What is the CPU also known as?", options: ["Brain of the computer", "Memory of the computer", "Storage of the computer", "Input device"], correct: "A", explanation: "CPU is the brain of the computer.", detailed: "CPU performs arithmetic, logic, and control operations." },
            { question: "Q4. Which type of memory is temporary while the computer is running?", options: ["RAM", "ROM", "Hard Drive", "USB Flash Drive"], correct: "A", explanation: "RAM is volatile/temporary.", detailed: "RAM loses data when power is off." },
            { question: "Q5. Which type of memory is permanent and stores essential instructions?", options: ["Monitor", "RAM", "Keyboard", "ROM"], correct: "D", explanation: "ROM is non-volatile.", detailed: "BIOS/UEFI is stored in ROM." },
            { question: "Q6. Which part of the computer connects all components?", options: ["CPU", "Hard Drive", "Motherboard", "RAM"], correct: "C", explanation: "Motherboard connects everything.", detailed: "It provides data and power connections." },
            { question: "Q7. Which device is used for permanent storage of files?", options: ["USB Flash Drive", "RAM", "Hard Drive", "Monitor"], correct: "C", explanation: "Hard Disk Drive is primary permanent storage.", detailed: "SSDs also serve the same purpose." },
            { question: "Q8. Which device is considered portable storage?", options: ["Hard Drive", "USB Flash Drive", "Motherboard", "CPU"], correct: "B", explanation: "USB flash drives are portable.", detailed: "They use NAND flash memory." },
            { question: "Q9. Which of the following is an input device?", options: ["Scanner", "Printer", "Speaker", "Monitor"], correct: "A", explanation: "Scanner sends data to computer.", detailed: "It is an input device." },
            { question: "Q10. A keyboard is an input device.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" },
            { question: "Q11. A printer is an output device.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" },
            { question: "Q12. The CPU is called the brain of the computer.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" },
            { question: "Q13. RAM stores data permanently.", options: ["TRUE", "FALSE"], correct: "B", explanation: "RAM is volatile.", detailed: "" },
            { question: "Q14. ROM stores essential instructions permanently.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" },
            { question: "Q15. The motherboard connects all computer components.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" },
            { question: "Q16. A USB flash drive is used for portable storage.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" },
            { question: "Q17. A scanner is an input device.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" },
            { question: "Q18. A monitor is an output device.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" },
            { question: "Q19. SSD contains moving mechanical parts.", options: ["TRUE", "FALSE"], correct: "B", explanation: "SSDs have no moving parts.", detailed: "" },
            { question: "Q20. HDD and SSD are non-volatile storage devices.", options: ["TRUE", "FALSE"], correct: "A", explanation: "Correct.", detailed: "" }
        ];

        let currentIndex = 0;
        let userAnswers = new Array(20).fill(null);
        let submitted = new Array(20).fill(false);
        let quizActive = false;
        let timerSeconds = 180;
        let timerInterval = null;

        const qCounter = document.getElementById('qCounter');
        const timerDisplay = document.getElementById('timerDisplay');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const correctFeedback = document.getElementById('correctFeedback');
        const incorrectFeedback = document.getElementById('incorrectFeedback');
        const submitBtn = document.getElementById('submitBtn');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const quizArea = document.getElementById('quizArea');
        const startQuizBtn = document.getElementById('startQuizBtn');
        const saveScoreBtn = document.getElementById('saveScoreBtn');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const introVideo = document.getElementById('introVideo');
        const introVideoContainer = document.getElementById('introVideoContainer');

        function stopTimer() { if(timerInterval) clearInterval(timerInterval); timerInterval = null; }
        
        function startTimer() {
            stopTimer();
            timerSeconds = 180;
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                if (timerSeconds > 0) { timerSeconds--; updateTimerDisplay(); }
                else { stopTimer(); alert("Time's up!"); }
            }, 1000);
        }

        function updateTimerDisplay() {
            const mins = Math.floor(timerSeconds / 60);
            const secs = timerSeconds % 60;
            timerDisplay.textContent = `‚è±Ô∏è ${mins}:${secs.toString().padStart(2,'0')}`;
        }

        function calculateScore() {
            let count = 0;
            for(let i=0; i<20; i++) { if(submitted[i] && userAnswers[i] === questions[i].correct) count++; }
            return count;
        }

        function updateScoreUI() {
            const score = calculateScore();
            scoreDisplay.textContent = score;
            document.getElementById('streakDisplay').textContent = `üî• ${score} correct`;
        }

        function renderQuestion() {
            const q = questions[currentIndex];
            questionText.textContent = q.question;
            let htmlStr = '';
            const letters = ['A','B','C','D'];
            for(let i=0; i<q.options.length; i++) {
                let optClass = 'option';
                const optLetter = letters[i];
                if(userAnswers[currentIndex] === optLetter) optClass += ' selected';
                if(submitted[currentIndex]) {
                    if(optLetter === q.correct) optClass += ' correct';
                    else if(userAnswers[currentIndex] === optLetter) optClass += ' incorrect';
                }
                htmlStr += `<div class="${optClass}" data-opt="${optLetter}">
                    <div class="option-letter">${optLetter}</div>
                    <div class="option-text">${q.options[i]}</div>
                </div>`;
            }
            optionsContainer.innerHTML = htmlStr;

            document.querySelectorAll('.option').forEach(opt => {
                opt.addEventListener('click', function() {
                    if(submitted[currentIndex]) return;
                    userAnswers[currentIndex] = this.getAttribute('data-opt');
                    renderQuestion();
                    submitBtn.disabled = false;
                });
            });

            if(submitted[currentIndex]) {
                const isCorrect = userAnswers[currentIndex] === q.correct;
                correctFeedback.style.display = isCorrect ? 'block' : 'none';
                incorrectFeedback.style.display = isCorrect ? 'none' : 'block';
                if(isCorrect) correctFeedback.innerHTML = `<div class="feedback-title">‚úÖ Correct!</div>${q.explanation}`;
                else incorrectFeedback.innerHTML = `<div class="feedback-title">‚ùå Incorrect</div>Correct: ${q.correct}`;
            } else {
                correctFeedback.style.display = 'none';
                incorrectFeedback.style.display = 'none';
            }

            submitBtn.disabled = submitted[currentIndex] || !userAnswers[currentIndex];
            nextBtn.disabled = !submitted[currentIndex];
            prevBtn.disabled = (currentIndex === 0);
            qCounter.textContent = `Question ${currentIndex+1} / 20`;
        }

        // --- UPDATED LOGIC HERE ---
        function handleQuizButton() {
            if (!quizActive) {
                // STARTING FOR THE FIRST TIME
                startQuiz();
            } else {
                // RESETTING
                resetToVideo();
            }
        }

        function startQuiz() {
            introVideo.pause();
            introVideoContainer.style.display = 'none';
            
            userAnswers = new Array(20).fill(null);
            submitted = new Array(20).fill(false);
            currentIndex = 0;
            quizActive = true;
            
            startTimer();
            quizArea.style.display = 'block';
            renderQuestion();
            updateScoreUI();
            saveScoreBtn.disabled = false;
            startQuizBtn.textContent = "üîÑ Reset & Watch Video";
        }

        function resetToVideo() {
            stopTimer();
            quizActive = false;
            quizArea.style.display = 'none';
            
            // Bring video back
            introVideoContainer.style.display = 'block';
            introVideo.currentTime = 0; // Rewind video
            
            startQuizBtn.textContent = "‚ñ∂ Start Quiz";
            updateScoreUI();
        }

        startQuizBtn.addEventListener('click', handleQuizButton);
        // -------------------------

        submitBtn.addEventListener('click', () => {
            submitted[currentIndex] = true;
            renderQuestion();
            updateScoreUI();
        });

        nextBtn.addEventListener('click', () => { 
            if(currentIndex < 19) { 
                currentIndex++; 
                renderQuestion(); 
            } else { 
                alert('Quiz Finished!'); 
            }
        });

        prevBtn.addEventListener('click', () => { 
            if(currentIndex > 0) { 
                currentIndex--; 
                renderQuestion(); 
            }
        });

        document.querySelectorAll('.nav-item').forEach((item, idx) => {
            item.addEventListener('click', () => {
                if(idx === 0) window.location.href = 'Learningmainpage.html';
                else if(idx === 3) window.location.href = 'Profile view.html';
            });
        });

    })();
</script>
</body>
</html>